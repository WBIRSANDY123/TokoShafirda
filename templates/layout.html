<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<title>TOKO SHAFIRDA</title>

	<!-- Fonts -->
	<link
		href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap"
		rel="stylesheet" />

	<!-- Icons -->
	<link href="/public/css/nucleo-icons.css" rel="stylesheet" />
	<link href="/public/css/font-awesome.css" rel="stylesheet" />

	<!-- Jquery UI -->
	<link type="text/css" href="/public/css/jquery-ui.css" rel="stylesheet" />

	<!-- Argon CSS -->
	<link type="text/css" href="/public/css/argon-design-system.min.css" rel="stylesheet" />

	<!-- Main CSS-->
	<link type="text/css" href="/public/css/style.css" rel="stylesheet" />

	<!-- Optional Plugins-->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />

	<!-- Custom aesthetic styles for header -->
	<style>
		.header {
			box-shadow: 0 4px 20px rgba(0, 123, 255, 0.1);
			background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
		}

		.top-bar {
			background: linear-gradient(90deg, #007bff 0%, #0056b3 100%);
			color: white;
			padding: 8px 0;
		}

		.top-bar a {
			color: white !important;
			transition: all 0.3s ease;
		}

		.top-bar a:hover {
			color: #ffd700 !important;
			text-decoration: none;
		}

		.top-bar i {
			margin-right: 5px;
			color: #ffd700;
		}

		.header-main {
			padding: 20px 0;
			background: white;
			border-top: 3px solid #007bff !important;
		}

		.navbar-brand {
			transition: all 0.3s ease;
		}

		.navbar-brand:hover {
			transform: translateY(-2px);
		}

		.navbar-brand .fa-shopping-bag {
			color: #007bff;
			margin-right: 10px;
			text-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
		}

		.logo {
			font-weight: 700;
			font-size: 24px;
			background: linear-gradient(45deg, #007bff, #0056b3);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			text-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);
		}

		.form-control {
			border-radius: 25px 0 0 25px;
			border: 2px solid #e3f2fd;
			padding: 12px 20px;
			transition: all 0.3s ease;
		}

		.form-control:focus {
			border-color: #007bff;
			box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
		}

		.btn-primary {
			border-radius: 0 25px 25px 0;
			padding: 12px 20px;
			background: linear-gradient(45deg, #007bff, #0056b3);
			border: none;
			transition: all 0.3s ease;
		}

		.btn-primary:hover {
			background: linear-gradient(45deg, #0056b3, #004085);
			transform: translateY(-1px);
			box-shadow: 0 4px 12px rgba(0, 123, 255, 0.4);
		}

		.shopping-cart {
			position: relative;
			transition: all 0.3s ease;
		}

		.shopping-cart:hover {
			transform: scale(1.1);
		}

		.shopping-cart .fa-shopping-cart {
			color: #007bff;
			transition: all 0.3s ease;
		}

		.shopping-cart:hover .fa-shopping-cart {
			color: #0056b3;
		}

		.badge {
			position: absolute;
			top: -8px;
			right: -8px;
			background: #dc3545;
			color: white;
			border-radius: 50%;
			min-width: 20px;
			height: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 12px;
		}

		.navbar-main {
			background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
			border-top: 1px solid #dee2e6 !important;
			border-bottom: 1px solid #dee2e6 !important;
			padding: 10px 0;
		}

		.nav-link {
			font-weight: 500;
			color: #495057 !important;
			padding: 10px 20px !important;
			border-radius: 20px;
			transition: all 0.3s ease;
			margin: 0 5px;
		}

		.nav-link:hover {
			background: linear-gradient(45deg, #007bff, #0056b3);
			color: white !important;
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
		}

		.dropdown-menu {
			border-radius: 15px;
			border: none;
			box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
			padding: 10px 0;
		}

		.dropdown-item {
			padding: 10px 20px;
			transition: all 0.3s ease;
			border-radius: 10px;
			margin: 2px 10px;
		}

		.dropdown-item:hover {
			background: linear-gradient(45deg, #007bff, #0056b3);
			color: white;
		}

		.navbar-toggler {
			border: none;
			padding: 8px 12px;
			border-radius: 10px;
			background: rgba(0, 123, 255, 0.1);
		}

		.navbar-toggler:focus {
			box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
		}

		.contact-info li,
		.account-links li {
			margin-right: 20px;
			font-size: 14px;
		}

		.contact-info li:last-child,
		.account-links li:last-child {
			margin-right: 0;
		}

		/* Adding modern aesthetic styles for footer */
		.footer {
			background: linear-gradient(135deg, #007bff 0%, #0056b3 50%, #004085 100%) !important;
			color: white !important;
			padding: 40px 0 20px 0 !important;
			position: relative;
			overflow: hidden;
		}

		.footer::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.05)"/><circle cx="10" cy="60" r="0.5" fill="rgba(255,255,255,0.05)"/><circle cx="90" cy="40" r="0.5" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
			pointer-events: none;
		}

		.footer-content {
			position: relative;
			z-index: 2;
		}

		.footer h4 {
			font-size: 28px !important;
			margin-bottom: 25px !important;
			font-weight: 700;
			text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
			position: relative;
			color: white !important;
		}

		.footer h4::after {
			content: '';
			position: absolute;
			bottom: -10px;
			left: 50%;
			transform: translateX(-50%);
			width: 60px;
			height: 3px;
			background: linear-gradient(90deg, #ffd700, #ffed4e);
			border-radius: 2px;
		}

		.footer h4 i {
			color: #ffd700;
			margin-right: 10px;
			text-shadow: 0 2px 4px rgba(255, 215, 0, 0.5);
		}

		.schedule-list {
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			border-radius: 15px;
			padding: 25px;
			margin: 20px auto;
			max-width: 600px;
			border: 1px solid rgba(255, 255, 255, 0.2);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
		}

		.schedule-list li {
			font-size: 16px !important;
			margin-bottom: 8px !important;
			padding: 8px 0;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			transition: all 0.3s ease;
		}

		.schedule-list li:last-child {
			border-bottom: none;
			margin-bottom: 0 !important;
		}

		.schedule-list li:hover {
			background: rgba(255, 255, 255, 0.1);
			border-radius: 8px;
			padding-left: 15px;
		}

		.schedule-list strong {
			color: #ffd700;
			font-weight: 600;
		}

		.address-section {
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			border-radius: 15px;
			padding: 20px;
			margin: 20px auto;
			max-width: 700px;
			border: 1px solid rgba(255, 255, 255, 0.2);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
		}

		.address-section p {
			font-size: 16px !important;
			margin: 0;
			line-height: 1.6;
		}

		.address-section strong {
			color: #ffd700;
			font-weight: 600;
		}

		.address-section a {
			color: white !important;
			text-decoration: none !important;
			border-bottom: 2px solid #ffd700;
			padding-bottom: 2px;
			transition: all 0.3s ease;
			display: inline-block;
			margin-top: 5px;
		}

		.address-section a:hover {
			color: #ffd700 !important;
			border-bottom-color: white;
			transform: translateY(-2px);
			text-shadow: 0 2px 8px rgba(255, 215, 0, 0.5);
		}

		.footer-bottom {
			margin-top: 30px;
			padding-top: 20px;
			border-top: 1px solid rgba(255, 255, 255, 0.2);
			font-size: 14px;
			opacity: 0.8;
		}

		.footer-icon {
			display: inline-block;
			margin-right: 8px;
			color: #ffd700;
		}

		/* Adding styles for Google Maps preview in address section */
		.map-preview {
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			border-radius: 15px;
			padding: 20px;
			margin: 20px auto;
			max-width: 700px;
			border: 1px solid rgba(255, 255, 255, 0.2);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
		}

		.map-preview iframe {
			width: 100%;
			height: 300px;
			border: none;
			border-radius: 10px;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.map-preview h5 {
			color: white;
			margin-bottom: 15px;
			font-weight: 600;
		}

		.map-preview h5 i {
			color: #ffd700;
			margin-right: 8px;
		}
	</style>
</head>

<body>
	<header class="header clearfix">
		<!-- Enhanced top bar with gradient background and better styling -->
		<div class="top-bar d-none d-sm-block">
			<div class="container">
				<div class="row">
					<div class="col-6 text-left">
						<ul class="top-links contact-info">
							<li><i class="fa fa-envelope-o"></i>
								<a href="mailto:wahyubahriirsandy@gmail.com" target="_blank">wahyubahriirsandy@gmail.com</a>
							</li>
							<li><i class="fa fa-whatsapp"></i>
								<a href="https://wa.me/628115992185" target="_blank">+62 811 5992 185</a>
							</li>

						</ul>
					</div>
					<div class="col-6 text-right">
						<ul class="top-links account-links">
							{{ if .user }}
							<li><i class="fa fa-user-circle-o"></i> <a href="/profile">{{ .user.FirstName }}</a></li>
							<li><i class="fa fa-power-off"></i> <a href="/logout">Logout</a></li>
							{{ else }}
							<li><i class="fa fa-user-circle-o"></i> <a href="/register">Register</a></li>
							<li><i class="fa fa-power-off"></i> <a href="/login">Login</a></li>
							{{ end }}
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!-- Enhanced main header with better spacing and modern styling -->
		<div class="header-main border-top">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-lg-3 col-12 col-sm-6">
						<a class="navbar-brand mr-lg-5" href="/">
							<i class="fa fa-shopping-bag fa-3x"></i> <span class="logo">TOKO SHAFIRDA</span>
						</a>
					</div>
					<div class="col-lg-7 col-12 col-sm-6">
						<form action="/products" method="get" class="w-100 d-flex">
							<div class="input-group w-120">
								<input type="text" class="form-control" name="query" placeholder="Cari produk..." required />
								<div class="input-group-append">
									<button class="btn btn-primary" type="submit">
										<i class="fa fa-search"></i>
									</button>
								</div>
							</div>
						</form>
					</div>
					<div class="col-lg-2 col-12 col-sm-6">
						<div class="right-icons pull-right d-none d-lg-block">
							<div class="single-icon shopping-cart">
								<a href="/carts"><i class="fa fa-shopping-cart fa-2x"></i></a>
								<span class="badge badge-default"></span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Enhanced navigation with modern styling and hover effects -->
		<nav class="navbar navbar-main navbar-expand-lg navbar-light border-top border-bottom">
			<div class="container">

				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav"
					aria-controls="main_nav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="main_nav">
					<ul class="navbar-nav">
						<li class="nav-item dropdown">
							<a class="nav-link" href="/">Beranda</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">Halaman</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/products">Produk</a>
								<a class="dropdown-item" href="/checkAWB">Lacak Pesanan</a>
								<a class="dropdown-item" href="/carts">Keranjang</a>
							</div>
						</li>
					</ul>
				</div> <!-- collapse .// -->
			</div> <!-- container .// -->
		</nav>
	</header>
	{{ yield }}
	<!-- Enhanced footer with modern aesthetic design -->
	<footer class="footer">
		<div class="footer-content">
			<div class="container text-center">
				<h4><i class="fa fa-clock-o footer-icon"></i>Jadwal Buka Toko</h4>
				<div class="schedule-list">
					<ul style="padding: 0; list-style-type: none; margin: 0;">
						<li><strong>Minggu - Kamis:</strong> 07.30 - 12.00, 13.30 - 18.00, 19.00 - 21.00</li>
						<li><strong>Jumat:</strong> 07.30 - 11.30, 14.00 - 18.00, 19.00 - 21.00</li>
						<li><strong>Sabtu:</strong> 07.30 - 12.00, 13.30 - 18.00</li>
					</ul>
				</div>

				<!-- Moving Google Maps preview above the address section -->
				<div class="map-preview">
					<h5><i class="fa fa-map"></i>Lokasi Toko</h5>
					<iframe
						src="https://www.google.com/maps/embed/v1/place?key=AIzaSyCBu4VY268SA3cNMFbdDnkmBDDdmQnj9dE&q=-0.5262607569909199,117.1367417141197&zoom=17&maptype=roadmap"
						allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
					</iframe>
				</div>

				<div class="address-section">
					<p>
						<i class="fa fa-map-marker footer-icon"></i><strong>Alamat:</strong><br>
						<a href="https://maps.app.goo.gl/LrQbKADKb1HNGu2b9" target="_blank">
							Jl. KH. Harun Nafsi No.106, RT.22, Rapak Dalam, Kec. Loa Janan Ilir, Kota Samarinda, Kalimantan Timur
							75251
						</a>
					</p>
				</div>

				<div class="footer-bottom">
					<p><i class="fa fa-copyright footer-icon"></i>2025 Toko Shafirda. Semua hak dilindungi undang-undang.</p>
				</div>
			</div>
		</div>
	</footer>


	<!-- Core -->
	<script src="/public/js/core/jquery.min.js"></script>
	<script src="/public/js/core/popper.min.js"></script>
	<script src="/public/js/core/bootstrap.min.js"></script>
	<script src="/public/js/core/jquery-ui.min.js"></script>

	<!-- Required plugins -->
	<script src="/public/js/plugins/perfect-scrollbar.jquery.min.js"></script>

	<!-- Optional plugins -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

	<!-- Argon JS -->
	<script src="/public/js/argon-design-system.js"></script>

	<!-- Main JS-->
	<script src="/public/js/main.js"></script>

	<!-- Global variables for maps -->
	<script>
		let map;
		let marker;

		// Event handlers untuk courier selection dan maps
		document.addEventListener("DOMContentLoaded", function () {
			const courierSelect = document.getElementById("courier");
			const mapContainer = document.getElementById("map-container");

			if (courierSelect && mapContainer) {
				courierSelect.addEventListener("change", function () {
					if (["grab", "gojek", "deliveree", "lalamove"].includes(courierSelect.value)) {
						mapContainer.style.display = "block";
						// Delay initMap to ensure container is visible
						setTimeout(initMap, 100);
						inactiveReadOnly();
						document.getElementById('cour_type').value = 'instant';
					} else if (courierSelect.value == 'pickup') {
						mapContainer.style.display = "none";
						fillAddress();
						document.getElementById('cour_type').value = 'pickup';
					} else {
						mapContainer.style.display = "none";
						document.getElementById('cour_type').value = 'regular';
						inactiveReadOnly();
					}
				});
			}

			function fillAddress() {
				document.getElementById('address1').value = 'Jl. KH. Harun Nafsi No.106';
				document.getElementById('shipping_fee_options').style.display = 'none';
				document.getElementById('address1').readOnly = true;
				$("#grand-total").text($("#grand-total-without-ongkir").text());
				document.getElementById('first_name').value = 'Toko';
				document.getElementById('first_name').readOnly = true;
				document.getElementById('last_name').value = 'Shafirda';
				document.getElementById('last_name').readOnly = true;
			}

			function inactiveReadOnly() {
				document.getElementById('address1').readOnly = false;
				document.getElementById('first_name').readOnly = false;
				document.getElementById('last_name').readOnly = false;
				document.getElementById('address1').value = '';
				document.getElementById('last_name').value = '';
				document.getElementById('first_name').value = '';
				document.getElementById('shipping_fee_options').style.display = 'block';
			}
		});

		// Global function for Google Maps callback
		function initMap() {
			const mapElement = document.getElementById("map");
			if (!mapElement) return;

			// Updated coordinates for Toko Shafirda - Jl. KH. Harun Nafsi No.106, Loa Janan Ilir
			const defaultLocation = { lat: -0.5262810043373423, lng: 117.13669626404219 };

			map = new google.maps.Map(mapElement, {
				center: defaultLocation,
				zoom: 12,
			});

			marker = new google.maps.Marker({
				position: defaultLocation,
				map: map,
				draggable: true,
			});

			// Event listener untuk marker drag
			google.maps.event.addListener(marker, 'dragend', function () {
				const position = marker.getPosition();
				document.getElementById('latitude').value = position.lat();
				document.getElementById('longitude').value = position.lng();
				updateLocationInfo(position.lat(), position.lng());
			});

			// Event listener untuk map click
			google.maps.event.addListener(map, 'click', function (event) {
				const clickedLocation = event.latLng;
				marker.setPosition(clickedLocation);
				document.getElementById('latitude').value = clickedLocation.lat();
				document.getElementById('longitude').value = clickedLocation.lng();
				updateLocationInfo(clickedLocation.lat(), clickedLocation.lng());
			});
		}

		// Global function untuk update location info
		function updateLocationInfo(lat, lng) {
			const domShippingCalculationMsg = document.getElementById("shipping-calculation-msg");
			if (domShippingCalculationMsg) {
				domShippingCalculationMsg.innerHTML = `<div class="alert alert-info small">Lokasi Instant Delivery Dipilih<br/>Koordinat: ${lat.toFixed(6)}, ${lng.toFixed(6)}</div>`;
			}
		}

		// Simpan lokasi saat tombol diklik
		document.addEventListener("DOMContentLoaded", function () {
			const confirmButton = document.getElementById("confirm-location");
			if (confirmButton) {
				confirmButton.addEventListener("click", function () {
					if (marker) {
						const lat = marker.getPosition().lat();
						const lng = marker.getPosition().lng();
						let cityID = $(".city_id").val();
						let courier = $(".courier").val();
						requestPrice(cityID, "instant", courier, lat, lng);
						alert(`Latitude: ${lat}, Longitude: ${lng} telah dipilih.`);
					}
				});
			}
		});
	</script>

	<!-- Load Google Maps API -->
	<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCBu4VY268SA3cNMFbdDnkmBDDdmQnj9dE&loading=async&callback=initMap"></script>

</body>

</html>